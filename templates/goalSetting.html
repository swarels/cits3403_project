<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>FitTrack</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}" >
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="icon" type="image/x-icon" href="https://dreamlightvalleywiki.com/images/7/70/Remy.png">

    <style>
    body{
    background-color: #21262b;
    color: white;
    margin: 10px;
    margin-left: 40px;
    font-family: 'Poppins', sans-serif;
    }

    /* .content {
    display: flex;
    align-items: center;
    justify-content: center
    } */

    .content {
            display: flex;
            align-items: flex-start;
        }

    h1 {
    font-family: 'Teko', sans-serif;
    color: #eb1022;
    font-size: 50px;
    position: absolute;
    top: 0;
    left: 0;
    margin: 20px
    
    }

    input[type=radio]{
        transform: scale(2);
        margin-right: 1em;
    }

    label{
        margin-right: 2em;
    }

    .rat {
        flex: 0 0 auto;
        margin-right: 10px;
        margin-top: 10px;
        margin-left: 200px;
    } 

    .comments {
        width: 350px;
    }

    .comments .comment {
        width: 100%;
        margin-bottom: 20px;
    }

    .comments .comment p {
        margin: 0 0 10px 0;
    }

    .bubble{
        position: relative;
        background: #fff;
        padding: 20px;
        color: #222;
        border-radius: 3px;
        margin-left: 75px;
        margin-top: 50px;
    }

    .bubble:after {
        content: "";
        display: block;
        position: absolute;

        left: -15px;

        width: 0;
        height: 0;
        border-top: 8px solid transparent;
        border-bottom: 8px solid transparent;
        border-right: 15px solid #fff;
    }

    .regular{
        flex: 0 0 auto;
        margin-right: 10px;
        margin-top: 50px;
        margin-left: 200px;
    }

    .hidden {
        display: none;
    }

    
    </style>
</head>
<body> 
    <div class="content">
        <h1>FitTrack</h1>

        <div class="rat">
            <img class="icon" src="https://dreamlightvalleywiki.com/images/7/70/Remy.png" width = 200px>
        </div>

        <div class = "comments">
            <div class="comment bubble">
                <p> Please answer the following questions! </p>
                <p> This will help our professional fitness guiders better understand how to help you and give you information tailored towards your specific needs</p>
            </div>
        </div>
    </div>

    <button id="next-button" class="regular">Next Question</button>

    <form>
    <!-- Goals -->
    <article id="question1" class="regular">
        <h4> What is your main goal?</h4>

        <input type="radio" name="goal" id="rad1" value="Lose Weight">
        <label for="rad1">Lose Weight</label>

        <input type="radio" name="goal" id="rad2" value="Gain Weight">
        <label for="rad2">Build Muscle</label>

        <input type="radio" name="goal" id="rad3" value="Get in shape">
        <label for="rad3">Get In Shape</label>

        <input type="radio" name="goal" id="rad4" value="other">
        <label for="rad4">Other</label><br><br>
        <input type="text" name="goal" id="other-goal" name="other-goal" placeholder="Please specify" size="80" style="display: none;">

    </article>

    <!-- Height/Weight -->
    <article id="question2" class=" regular hidden">
        <h4> What is your current height and weight?</h4>
        <input type="text" name="height" id="text1" placeholder="Height">
        <input type="text" name="weight" id="text2" placeholder="Weight">
    </article>

    <!-- Gender -->
    <article id="question3" class="regular hidden">
        <h4> What sex does your body most identify as?<h4>
        <select id="Gender" name="Gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select>
    </article>

    <!-- How regularly do they exercise? -->
    <article id="question4" class="regular hidden">
        <h4> How often have you been exercising in the last year?<h4>
        <select id="Past exercise" name="Past exercise">
            <option value="Mutiple_Week">Multiple times a week</option>
            <option value="Once_Week">Once a Week or so</option>
            <option value="Occasion">On the off occasion</option>
            <option value="Never">Almost never</option>
        </select>
    </article>

    <!-- Days willing -->
    <article id="question5" class="regular hidden">
        <h4> How many days per week are you willing to commit to exercise?<h4>
        <select id="willing" name="willing">
            <option value="7"> 7 days a week</option>
            <option value="5-6"> 5 to 6 days a week</option>
            <option value="3-4"> 3 to 4 days a week</option>
            <option value="2"> 2 days a week</option>
            <option value="1"> Once a week</option>
        </select>
    </article>

    <!-- Food allergies-->
    <article id="question6" class="regular hidden">
        <label for="dietary_requirements"> Do you have any dietary restrictions or food allergies</label><br><br>
        <input type="text" name="dietary_requirements" id="dietary_requirements" placeholder="Please specify" size="80">
    </article>

    <!-- Other Comments-->
    <article id="question7" class="regular hidden">
        <label for="extra info"> Is there any additional information you want to provide to your fitness guider</label><br><br>
        <input type="text" name="extra info" id="extra info" placeholder="Please specify" size="80">
    </article>

    <!-- Submit-->
    <article id="question8submit" class="regular">
        <input type="submit" value="Submit" name="submit_button">
    </article>
    
    </form>






    <!-- JAVA SCRIPT SECTION-->
    <script>
        /**
         * Make an "other" text-box appear when selecting other
         **/
        const otherGoalRadio = document.getElementById('rad4');
        const otherGoalTextbox = document.getElementById('other-goal');

        otherGoalRadio.addEventListener('change', function() {
            console.log("Other Pressed");
        if (otherGoalRadio.checked) {
            otherGoalTextbox.style.display = 'block';
        } else {
            otherGoalTextbox.style.display = 'none';
        }
        });

        //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//

        /**
         * Add form elements to an array, once selecting submit
         **/
        const form = document.querySelector('form');
        form.addEventListener('submit', onSubmit);

        // Function for submit
        function onSubmit(event) {
            console.log("onSubmit function triggered");
            event.preventDefault();                 // Prevent default when submit is pressed
            // Initialize answers array
            const form_answers = [];
            
            // Get the correct radio button for the goals
            const goalRadios = form.querySelectorAll('input[name="goal"]');
            let goal = null;
            goalRadios.forEach(radio => {
                if (radio.checked) {            // If checked select as the "goal"
                    goal = radio.value;
                }
            })
            if (goal == "other") {              // If other is selected, get the other value
                goalRadios.forEach(radio => {
                    if (radio.id == "other-goal") {
                        goal = radio.value;
                    }
                })
            }
            form_answers.push(goal);

            // Get the values of the form (with tags input or select)
            const inputs = form.querySelectorAll('input, select');
            
            // Loop through inputs, pushing to the answers array
            inputs.forEach(input => {
                if (input.name == "goal") {
                    return;
                }
                if (input.name == "submit_button") {
                    return;
                }
                form_answers.push(input.value);
            })
            // Print array to console
            console.log("Array of form_answers: ");
            console.log(form_answers)
        }

        //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~//

        /**
         * Only show the next question once the previous one has been answered
         **/
        function showNextQuestion(currentQuestionId2) {
            // Hide the current question
            var currentQuestion = document.getElementById(currentQuestionId2);
            currentQuestion.classList.add("hidden");

            // Show the next question
            var nextQuestionId = "question" + (parseInt(currentQuestionId2.replace("question", "")) + 1);
            console.log("nextQuestionID: " + nextQuestionId);
            var nextQuestion = document.getElementById(nextQuestionId);
            nextQuestion.classList.remove("hidden");
            q_count += 1;
            currentQuestionId = "question" + q_count.toString();
        }

        // Call the showNextQuestion function when the user clicks the button
        var button = document.getElementById("next-button");
        var currentQuestionId = "question1";
        var q_count = 1;


        button.addEventListener("click", function() {
            // Show the next question
            showNextQuestion(currentQuestionId);
        });

        
    </script>



</body>
</html>